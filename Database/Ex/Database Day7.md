# 数据完整性
- 它是保证用户输入的数据保存到数据库中是正确的
## 如何添加数据完整性
- 在创建表的时候添加约束,来保证数据的完整性
## 完整性分类
- 实体完整性
- 域完整性
- 引用完整性
## 实体完整性
- 表中的一行(一条记录)表示一个实体
- 它的作用:标识每一行的数据不重复,行级约束
- 约束类型:
  * 主键约束: (primary key)
    * 特点:每个表中要有一个主键;数据唯一,并且不能为空
    * 添加方式:
      * create table 表名(字段名1 数据类型 primary key , 字段2 数据类型);表示字段1内容不重复
      * creat table 表名(字段1 数据类型,字段2 数据类型, primary key(要设置主键的字段));表示设置的字段内容不可以重复
      * cteat table 表名(字段1 数据类型,字段2 数据类型, primary key(字段1,字段2));可以把多个字段同时设置成主键,同时比较字段1和字段2的内容,如果两个字段数据同时相同时,才违反联合约束
      * 比如:id = 1001 ,num =1002;
      * id = 1001 ,num = 1002;这两组数据才违反了联合约束
    * 联合主键:可以把多个字段同时设置成主键
    * ==添加方式二==:
      * 先创建表
      * 再通过修改表来创建主键
        * alter table 表名 add constraint primary key(约束字段)
  * 唯一约束: (unique)
    * 特点:指定列的数据不能重复;数据可以为空
    * 格式:
      * creat table 表名(字段1 数据类型,字段2 数据类型 unique);在需要约束的字段后面跟上==unique==就表示对该字段进行了唯一约束
  * 自动增长列: (auto_increment)
    * 特点:
      * 指定列的数据会自动增长
      * ==即便数据删除,还是从删除的序号继续往下==,就是如果删除了某一行,那么自动增长会从删除的那一行序号继续往下增长
    * 格式
      * creat table 表名(字段1 数据类型 primary key auto_increment ,字段2 数据类型 unique);
    * 使用情况:一般会设置主键列(主键列为整数类型)为自动增长列,在主键后面跟上 auto_increment即可
## 域完整性
- 使用
  * 限制此单元格的数据正确,不对照此列的其他单元格比较
  * 域代表当前单元格
  * 表示数据的作用域为单元格
- 域完整性的约束
  * 数据类型: 数值型,日期类型,字符串类型
  * 非空约束(not null):
    * creat table 表名(字段1 数据类型 primary key auto_increment ,字段2 数据类型 unique not null);直接在数据类型后面跟上not null即可;
  * 默认值约束(default):
    * creat table 表名(字段1 数据类型 primary key auto_increment, 字段2 数据类型 unique not null, 字段3 数据类型 default '约束的内容');在数据类型后面跟上default 加单引号('')即可,单引号里面的内容就是默认约束的内容
  * 如果不写,那么会有一个默认值
## 参照物完整性
- 什么是参照物完整性
  * 是指表与表之间的一种对应关系
  * 通常情况下可以通过设置两表之间的主键,外键,或者编写两表的触发器来实现
  * 有对应参照完整性的两张表格,在对它们进行数据插入,更新,删除的过程中,系统都会将被修改表格与另一张对应表进行对照,从而阻止一些不正确的数据的操作
- 数据库的主键和外键类型一定要一致
- 两个表必须得要是InnoDB类型
- 设置参照物完整性后,外键当中的内值,必须得是主键当中的内容
- 一个表设置当中的字段设置为主键,设置主键的为主表
- 创建表时,设置外键,设置外键为子表
## 添加参照物完整性
- 创建第一张表:creat table stu(id int primary key auto_increment, name varchar(50), age int);
- 创建第二张表并关联第一张表:creat table score(sid int ,score int,constraint sc_st_fk foreign key(sid) references stu(id));
  * 外键:需要和外部的表关联的键叫外键
  * 要关联的字段类型必须和被关联的表类型一致
  * 如何关联:通过constraint 关键字后面跟自定义约束名字 再跟 foreign key(要关联的字段名) references 被关联的表名(被关联的字段名)
- 通过修改表结构来添加参照物
  * alter table 要关联的表名 add constraint 自定义约束名字 foreign key(sid要关联的字段) references 被关联的表名(被关联的字段);
### ==参照物完整性约束之针对 修改,删除,添加==
